<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>根据IP查找对应交换机端口(IP地址溯源)</title>
      <link href="/posts/651def0f.html"/>
      <url>/posts/651def0f.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><hr><blockquote><p>项目现场中需要修改某个IP终端连接的VLAN时，不知道连接的是哪台交换机哪个端口，所以需要常常需要对IP地址进行端口溯源</p></blockquote><p><strong>例如：</strong><br>需要查看IP：29.206.33.211所在交换机端口</p><h2 id="1、登录核心交换机，查看ARP表"><a href="#1、登录核心交换机，查看ARP表" class="headerlink" title="1、登录核心交换机，查看ARP表"></a>1、登录核心交换机，查看ARP表</h2><pre class="line-numbers language-none"><code class="language-none">JDS-HX-S8610E#show arp | in 29.206.33.211Internet  29.206.33.211    4  0002.0000.be2f  arpa   VLAN 206<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="2、复制对应的mac地址，并查看mac地址表"><a href="#2、复制对应的mac地址，并查看mac地址表" class="headerlink" title="2、复制对应的mac地址，并查看mac地址表"></a>2、复制对应的mac地址，并查看mac地址表</h2><pre class="line-numbers language-none"><code class="language-none">JDS-HX-S8610E#show mac add 0002.0000.be2fVlan        MAC Address          Type     Interface----------  -------------------- -------- ------------------- 206        0002.0000.be2f       DYNAMIC  AggregatePort 9            <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>发现此时be2f连接的口是Port9，此时在核心交换机的show run中找到port-group 9所在的接口<img src="https://i.loli.net/2021/11/11/8ndHcBgtA6D4kLO.png"></p><h2 id="3、用邻居表找到对应端口所连接的交换机"><a href="#3、用邻居表找到对应端口所连接的交换机" class="headerlink" title="3、用邻居表找到对应端口所连接的交换机"></a>3、用邻居表找到对应端口所连接的交换机</h2><pre class="line-numbers language-none"><code class="language-none">JDS-HX-S8610E#show lldp neiCapability codes:    (R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device    (W) WLAN Access Point, (P) Repeater, (S) Station, (O) OtherSystem Name                 Local Intf          Port ID                     Capability   Aging-timeErDaoMenLou-2F-S2952-01     Gi1/1/1             Gi0/51                      B, R         1minutes 37seconds YiHaoJieDuSuShe-1F-HJ-S5750 Gi1/1/2             Gi1/0/12                    B, R         1minutes 33seconds XiYiLou-4F-S2928-01         Gi1/1/4             Gi0/28                      B, R         1minutes 44seconds HuoFang-1F-S2928-01         Gi1/1/5             Gi0/27                      B, R         1minutes 58seconds BanGongLou-1F-S2928-01      Gi1/1/6             Gi0/27                      B, R         1minutes 44seconds BanGongLou-2F-S2952-01      Gi1/1/7             Gi0/52                      B, R         1minutes 51seconds BanGongLou-3F-S2952-01      Gi1/1/8             Gi0/51                      B, R         1minutes 52seconds BanGongLou-4F-S2952-01      Gi1/1/9             Gi0/52                      B, R         1minutes 59seconds BanGongLou-5F-S2928-01      Gi1/1/10            Gi0/28                      B, R         1minutes 41seconds BanGongLou-6F-S2928-01      Gi1/1/11            Gi0/27                      B, R         1minutes 31seconds ZongHeLou-2F-S2952-03       Gi1/1/12            Gi0/51                      B, R         1minutes 50seconds YiDaoMenLou-1F-S2928-01     Gi1/1/13            Gi0/28                      B, R         1minutes 36seconds XinLiZhiLiaoLou-2F-S2952-01 Gi1/1/14            Gi0/51                      B, R         1minutes 39seconds <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>发现Gi1/1/7所连接的交换机是BanGongLou-2F-S2952-01，它的IP地址是29.144.33.13<img src="https://i.loli.net/2021/11/11/srgYDohuC3jpBHb.png"></p><h2 id="4、telnet进去，再次show-mac-add"><a href="#4、telnet进去，再次show-mac-add" class="headerlink" title="4、telnet进去，再次show mac add"></a>4、telnet进去，再次show mac add</h2><pre class="line-numbers language-none"><code class="language-none">JDS-HX-S8610E#telnet 29.144.33.13Trying 29.144.33.13, 23...User Access VerificationPassword:***********BanGongLou-2F-S2952-01&gt;enPassword:***********BanGongLou-2F-S2952-01#show mac add 0002.0000.be2fVlan        MAC Address          Type     Interface                      Time----------  -------------------- -------- ------------------------------ -------------------- 206        0002.0000.be2f       DYNAMIC  AggregatePort 2                2020-2-14 15:34:28 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>发现此时be2f连接的口是Port2，并不是具体的接口，所以还需要继续往下找，此时在该交换机show run中找到port-group 2所在的接口<img src="http://qiniu.jxblogs.com/image-20211111221437422.png"></p><h2 id="5、重复以上步骤"><a href="#5、重复以上步骤" class="headerlink" title="5、重复以上步骤"></a>5、重复以上步骤</h2><pre class="line-numbers language-none"><code class="language-none">BanGongLou-2F-S2952-01#show lldp neiCapability codes:    (R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device    (W) WLAN Access Point, (P) Repeater, (S) Station, (O) OtherSystem Name                 Local Intf          Port ID                     Capability   Aging-timeUnknown                     Gi0/3               8c16.4549.cc05                           57minutes 59seconds Unknown                     Gi0/3               b025.aa27.c0ea                           58minutes 16seconds Unknown                     Gi0/3               144f.d7c8.2917                           45minutes 57seconds BanGongLou-2F-S2952-03      Gi0/47              Gi0/45                      B, R         1minutes 49seconds BanGongLou-2F-S2952-03      Gi0/48              Gi0/46                      B, R         1minutes 49seconds JDS-HX-S8610E               Gi0/51              Gi2/1/7                     B, R         1minutes 49seconds JDS-HX-S8610E               Gi0/52              Gi1/1/7                     B, R         1minutes 42seconds <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>telnet进入BanGongLou-2F-S2952-03</p><pre class="line-numbers language-none"><code class="language-none">BanGongLou-2F-S2952-03#show mac add 0002.0000.be2fVlan        MAC Address          Type     Interface                      Time----------  -------------------- -------- ------------------------------ -------------------- 206        0002.0000.be2f       DYNAMIC  AggregatePort 5                2021-8-30 15:15:27 BanGongLou-2F-S2952-03#show lldp neiCapability codes:    (R) Router, (B) Bridge, (T) Telephone, (C) DOCSIS Cable Device    (W) WLAN Access Point, (P) Repeater, (S) Station, (O) OtherSystem Name                 Local Intf          Port ID                     Capability   Aging-timeZhiHuiZhongXin              Gi0/27              Gi0/23                      B, R         1minutes 44seconds ZhiHuiZhongXin              Gi0/28              Gi0/24                      B, R         1minutes 45seconds Unknown                     Gi0/36              00d8.61e8.a421                           49minutes 45seconds Unknown                     Gi0/39              00d8.61ea.8417                           55minutes 31seconds BanGongLou-2F-S2952-01      Gi0/45              Gi0/47                      B, R         1minutes 37seconds BanGongLou-2F-S2952-01      Gi0/46              Gi0/48                      B, R         1minutes 37seconds BanGongLou-2F-S2952-02      Gi0/47              Gi0/47                      B, R         1minutes 47seconds BanGongLou-2F-S2952-02      Gi0/48              Gi0/48                      B, R         1minutes 47seconds Total entries displayed: 8BanGongLou-2F-S2952-03#BanGongLou-2F-S2952-03#telnet 29.144.33.16Trying 29.144.33.16, 23...User Access VerificationPassword:***********ZhiHuiZhongXin&gt;enPassword:***********ZhiHuiZhongXin#show mac add 0002.0000.be2fVlan        MAC Address          Type     Interface                      Time----------  -------------------- -------- ------------------------------ -------------------- 206        0002.0000.be2f       DYNAMIC  GigabitEthernet 0/5            2021-11-10 0:05:45 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>最后追溯至ZhiHuiZhongXin交换机上，在这台交换机上show mac<br>add找到了确定的接口，说明就是这个口了，最后所得信息如下：</p><pre class="line-numbers language-none"><code class="language-none">IP：29.206.33.211对端交换机：ZhiHuiZhongXin交换机IP： 29.144.33.16对端端口： GigabitEthernet 0/5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>当需要修改vlan时，直接telnet进入交换机对应端口修改即可</p>]]></content>
      
      
      <categories>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IP </tag>
            
            <tag> 交换机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python常用模块熟悉</title>
      <link href="/posts/54bcc1f6.html"/>
      <url>/posts/54bcc1f6.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="PY常用模块"><a href="#PY常用模块" class="headerlink" title="PY常用模块"></a>PY常用模块</h1><h2 id="OS"><a href="#OS" class="headerlink" title="OS:"></a>OS:</h2><p><img src="http://qiniu.jxblogs.com/wpsF9D8.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9D9.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9DA.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9DB.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9DC.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9DD.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9DE.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9EF.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9F0.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9F1.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9F2.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9F3.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9F4.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsF9F5.tmp.jpg"> </p><h2 id="sys："><a href="#sys：" class="headerlink" title="sys："></a>sys：</h2><p><img src="http://qiniu.jxblogs.com/wpsFA06.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA07.tmp.jpg"> </p><h2 id="Crypto："><a href="#Crypto：" class="headerlink" title="Crypto："></a>Crypto：</h2><p><img src="http://qiniu.jxblogs.com/wpsFA08.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA18.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA19.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA1A.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA1B.tmp.jpg"> </p><h2 id="BASE64"><a href="#BASE64" class="headerlink" title="BASE64:"></a>BASE64:</h2><p><img src="http://qiniu.jxblogs.com/wpsFA2C.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA2D.tmp.jpg"> </p><h2 id="String："><a href="#String：" class="headerlink" title="String："></a>String：</h2><p><img src="http://qiniu.jxblogs.com/wpsFA2E.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA2F.tmp.jpg"> </p><h2 id="Platform："><a href="#Platform：" class="headerlink" title="Platform："></a>Platform：</h2><p><img src="http://qiniu.jxblogs.com/wpsFA30.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA40.tmp.jpg"> </p><h2 id="Time："><a href="#Time：" class="headerlink" title="Time："></a>Time：</h2><p><img src="http://qiniu.jxblogs.com/wpsFA41.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA42.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA43.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA44.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA45.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA46.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA47.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA58.tmp.jpg"> </p><h2 id="Random："><a href="#Random：" class="headerlink" title="Random："></a>Random：</h2><p><img src="http://qiniu.jxblogs.com/wpsFA59.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA5A.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA5B.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA5C.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA5D.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA5E.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA5F.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA60.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA61.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA62.tmp.jpg"> </p><h2 id="Paramiko："><a href="#Paramiko：" class="headerlink" title="Paramiko："></a>Paramiko：</h2><p>Kali：</p><p><img src="http://qiniu.jxblogs.com/wpsFA73.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA74.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA75.tmp.jpg"> </p><p>连接不上，打开kali查看22端口是否开放：</p><p><img src="http://qiniu.jxblogs.com/wpsFA76.tmp.jpg"> </p><p>发现果然没有开，先关闭kali防火墙</p><p><img src="http://qiniu.jxblogs.com/wpsFA86.tmp.jpg"> </p><p>再安装openssh</p><p><img src="http://qiniu.jxblogs.com/wpsFA87.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA88.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA89.tmp.jpg"> </p><p>再次查看，发现22端口已经开启：</p><p><img src="http://qiniu.jxblogs.com/wpsFA8A.tmp.jpg"> </p><p>再次尝试连接：成功连接</p><p><img src="http://qiniu.jxblogs.com/wpsFA8B.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA8C.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA8D.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA9E.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFA9F.tmp.jpg"> </p><h2 id="SSH批量爆破："><a href="#SSH批量爆破：" class="headerlink" title="SSH批量爆破："></a>SSH批量爆破：</h2><p><img src="http://qiniu.jxblogs.com/wpsFAA0.tmp.jpg"> </p><p><img src="http://qiniu.jxblogs.com/wpsFAB1.tmp.jpg"> []</p>]]></content>
      
      
      <categories>
          
          <category> -python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> SSH批量爆破 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
